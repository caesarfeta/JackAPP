function tserv(a){return angular.element(document.body).injector().get(a)}var app=angular.module("app",["ngRoute","appCtrl","appUI","angularFileUpload","minicolors"]),appUI=angular.module("appUI",[]),appCtrl=angular.module("appCtrl",[]);app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"html/explore.html",controller:"ExploreCtrl"})}]),appCtrl.controller("ExploreCtrl",["$scope",function(a){a.title="Explorer"}]),d3.custom={},d3.custom.tags={},d3.custom.barChart=function(a){var b={top:20,right:30,bottom:40,left:120},c=500-b.left-b.right,d=500-b.top-b.bottom,e=d3.scale.ordinal().domain(a.map(function(a){return a.name})).rangeRoundBands([0,d],.25),f=d3.scale.linear().domain([0,d3.max(a,function(a){return a.value})]).range([c,0]),g=(d3.svg.axis().scale(f).orient("bottom"),d3.svg.axis().scale(e).orient("left")),h=d3.select(".chart").attr("width",c+b.left+b.right).attr("height",d+b.top+b.bottom).append("g").attr("transform","translate("+b.left+","+b.top+")"),i=e.rangeBand(),j=h.selectAll(".bar").data(a).enter().append("g");j.append("rect").attr("class","bar").attr("x",function(){return 0}).attr("y",function(a){return e(a.name)}).attr("width",function(a){return c-f(a.value)}).attr("height",i).on("click",function(a){d3.custom.tags[a.name]=1}),j.append("text").attr("x",function(a){return c-f(a.value)+3}).attr("y",function(a){return e(a.name)+i-2}).text(function(a){return a.value}).attr("class","value"),h.append("g").attr("class","y axis").call(g).append("text").attr("transform","rotate(-90)").attr("x",-d/2).attr("y",-b.bottom).attr("dy",".71em").style("text-anchor","end")},appUI.directive("barChart",["$http",function(a){return{restrict:"E",replace:!0,template:'<svg class="chart"></svg>',link:function(b,c,d){function e(){a.get(d.src).then(function(a){d3.custom.barChart(a.data)})}e()}}}]),appUI.directive("chartForm",function(){return{restrict:"E",replace:!0,controller:function(a){function b(){return d3.range(~~(50*Math.random())+1).map(function(){return~~(1e3*Math.random())})}a.update=function(){a.data=b()}},template:'<div class="form">Height: {{ options.height }}<br /><input type="range" ng-model="options.height" min="100" max="800"/><br /><button ng-click="update()">Update Data</button><br />Hovered bar data: {{barValue}}</div>'}}),$(document).foundation(),appUI.directive("imageGrid",function(){return{restrict:"E",replace:!0,controller:function(a,b){b.get("json/data/vortex.json").success(function(b){a.data=b})},templateUrl:"ui/image-grid.ui.html"}});